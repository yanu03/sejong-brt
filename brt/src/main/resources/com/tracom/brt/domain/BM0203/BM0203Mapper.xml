<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tracom.brt.domain.BM0203.BM0203Mapper">

<select id="BM0203G0S0" parameterType="String" resultType="dvcConditionVO">
		SELECT
    		  DI.DVC_ID
    		, MAX(DC.DVC_COND) AS DVC_COND
    		, V.VHC_ID
    		, V.VHC_NO
    		, V.CHAS_NO
    		, V.CORP_ID
    		, V.AREA
    		, V.MAKER
    		, V.RELS_DATE
    		, V.MODEL_NM
    		, V.VHC_KIND
    		, V.VHC_TYPE
    		, V.LF_YN
    		, V.VHC_FUEL
    		, V.REMARK
    		, V.USE_YN
    		, DL.DL_CD_NM
    	FROM
    		BM_DVC_INFO DI
    		LEFT OUTER JOIN BM_DVC_COND DC
    		ON DI.DVC_ID = DC.DVC_ID
    		LEFT OUTER JOIN BM_VHC_INFO V
    		ON DI.VHC_ID = V.VHC_ID
    		LEFT OUTER JOIN SM_DL_CD_INFO DL
    		ON DVC_COND = DL.DL_CD
    	<where>
	    	<if test="value != null">
				V.VHC_ID LIKE CONCAT('%', #{value}, '%')
				OR V.VHC_NO LIKE CONCAT('%', #{value}, '%')
	    	</if>
    	</where>
    	GROUP BY VHC_ID
</select>

<select id="BM0203G1S0" parameterType="String" resultType="dvcConditionVO">
		SELECT
    		  DI.DVC_ID
    		, DI.DVC_KIND
    		, DI.MAKER
			, DI.DVC_TYPE
			, DI.INST_LOC
			, DI.MNG_ID
			, DI.DVC_IP
			, DI.REMARK 
    		, DC.DVC_COND
    		, V.VHC_ID
    		, DL.DL_CD_NM
    	FROM
    		BM_DVC_INFO DI
    		LEFT OUTER JOIN BM_DVC_COND DC
    		ON DI.DVC_ID = DC.DVC_ID
    		LEFT OUTER JOIN BM_VHC_INFO V
    		ON DI.VHC_ID = V.VHC_ID
    		LEFT OUTER JOIN SM_DL_CD_INFO DL
    		ON DVC_COND = DL.DL_CD
		WHERE
			DI.VHC_ID = #{value}	
</select>

</mapper>